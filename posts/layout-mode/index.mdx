---
title: CSS çš„æ ¹æœ¬ - Layout mode
excerpt: å¦‚æœä½ æƒ³æœ‰ä¸€å€‹æ­£ç¢ºçš„ CSS mental modelï¼Œé‚£éº¼ layout mode ä¸€å®šæ˜¯ä½ ä¸å¯æˆ–ç¼ºçš„æ¦‚å¿µã€‚åœ¨é€™ç¯‡æ–‡ç« è£¡ï¼Œæˆ‘æœƒå…ˆä»‹ç´¹ layout mode æ˜¯ä»€éº¼ï¼Œæ¥è‘—...
publish_date: 2022/1/9
category: mechanism
---

å¦‚æœä½ æƒ³æœ‰ä¸€å€‹æ­£ç¢ºçš„ CSS mental modelï¼Œé‚£éº¼ layout mode ä¸€å®šæ˜¯ä½ ä¸å¯æˆ–ç¼ºçš„æ¦‚å¿µã€‚

åœ¨é€™ç¯‡æ–‡ç« è£¡ï¼Œæˆ‘æœƒå…ˆä»‹ç´¹ layout mode æ˜¯ä»€éº¼ï¼Œæ¥è‘—æœƒä»‹ç´¹èˆ‡å…¶ç›¸é—œè¯çš„ formatting context èˆ‡ display å±¬æ€§ï¼Œä¸€èµ·ä¾†çœ‹çœ‹ display å±¬æ€§æ˜¯å¦‚ä½•å½±éŸ¿ layout mode çš„ã€‚

## Layout Mode

layout modeï¼Œæœ‰æ™‚åˆç¨± layoutï¼Œæ˜¯ä¸€çµ„æ¼”ç®—æ³•ï¼Œå®ƒ**å®šç¾©äº† element çš„æ’åˆ—æ–¹å¼åŠè¡Œç‚º**ï¼Œåƒæ˜¯åœ¨ flexible box layout è£¡ï¼Œelements å¯ä»¥ä¾æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ’åˆ—ï¼Œä¸¦ä¸”å¯ä»¥ç”¨ `justify-content` æˆ– `align-items` ç­‰å±¬æ€§æ§åˆ¶ element å¯¦éš›è©²åœ¨çš„ä½ç½®ã€‚

### Layout mode module

layout mode module æ˜¯å¦ä¸€å€‹å­˜åœ¨æ–¼ CSS è¦ç¯„ä¸­çš„ termï¼Œå®ƒä»£è¡¨äº†ä¸€å€‹æ–° layout åŠ ä¸Šå…¶æ‰€å¸¶ä¾†çš„æ–°å…§å®¹ï¼Œå¸¸è¦‹çš„ layout mode module æœ‰ positioned layout module, flexible box layout module, grid layout moduleï¼Œèˆ‰ flexible box layout module ç‚ºä¾‹ï¼Œé€™å€‹ module æ“´å……äº† `display` å±¬æ€§çš„å€¼ï¼š`flex`, `inline-flex` ä¸¦ä¸”æ·»åŠ æ•¸å€‹é—œéµå­—ï¼Œåƒæ˜¯ flex container, flex item, flex formatting context ç­‰ã€‚

åœ¨ç¾åœ¨ï¼ŒCSS ä¸­ç¸½å…±æœ‰ 7 ç¨®ä¸åŒçš„ layout modeï¼Œæˆ‘å€‘åº•ä¸‹ä¾†åˆ†åˆ¥ä»‹ç´¹ï¼š

### Flow Layout

flow layoutï¼Œåˆç¨± normal flowï¼Œæ˜¯é è¨­çš„ layoutï¼Œè‹¥ä½ æ²’æœ‰ç‰¹åˆ¥å®šç¾© layoutï¼Œé‚£éº¼æ•´ä»½ç¶²é å°±æœƒæ˜¯ flow layoutã€‚

åœ¨ flow layout è£¡ï¼Œblock level çš„ element æœƒåƒèˆ‡åˆ° block formatting contextï¼Œè€Œ inline level çš„ element å‰‡æœƒåƒèˆ‡åˆ° inline formatting contextï¼Œä¸”å…¶ä¸‹çš„ element éƒ½å¿…é ˆåƒèˆ‡ä¸€ç¨® formatting context (æ‰€ä»¥ä¸€å€‹ element ä¸æ˜¯ block å°±æ˜¯ inline)ã€‚

åœ¨ flow layout ä¸‹ï¼Œelement æ ¹æ“šå…¶æ‰€åœ¨çš„ formatting context (block or inline) ä¾†é€²è¡Œä¸åŒçš„æ’åˆ—ã€‚

### Table Layout

table layout ä¸‹çš„ element æœƒä»¥ table çš„æ–¹å¼é€²è¡Œæ’åˆ—ã€‚

### Positioned Layout

ä¾ç…§ position çš„ value ä»¥åŠ `top`, `bottom`, `left`, `right` ç­‰å±¬æ€§å° element é€²è¡Œå®šä½ã€‚

### Multi-column layout

multi-column layout ä¸‹çš„ element å¯ä»¥åƒ newspaper æˆ–æ›¸ç±é‚£æ¨£æ’åˆ—ã€‚

### Flexible box layout

flexible box layout ä¸‹çš„ element èƒ½é€é flex å±¬æ€§é€²è¡Œè¤‡é›œæ’åˆ—ã€‚

### Grid layout

grid layout ä¸‹çš„ element èƒ½é€é grid å±¬æ€§é€²è¡Œè¤‡é›œäºŒç¶­æ’åˆ—ã€‚

åœ¨é€™äº›ä¸åŒçš„ layout ä¸­é‚„å®šç¾©äº†è¨±å¤šç´°å‰‡ï¼Œåƒæ˜¯åœ¨ flexible box layout å®šç¾©äº† flex item ä¸æœƒç™¼ç”Ÿ margin collapseã€‚

è€Œ layout èˆ‡ layout å½¼æ­¤ä¹‹é–“ä¹Ÿå­˜åœ¨è‘—ä¸€äº›äº’å‹•è¦å‰‡ï¼Œåƒæ˜¯ positioned layout element é è¨­æœƒæ¸²æŸ“åœ¨å…¶ä»–ç¨® layout element çš„ã€Œä¸Šæ–¹ã€(z è»¸)ã€‚

é€™äº› layout çš„è¦å‰‡å¤§é‡ä¸”ç¹é›œï¼Œä¸”å…§å®¹è¶…å‡ºæœ¬ç¯‡ä¸»é¡Œï¼Œåœ¨æœªä¾†å†å‘å¤§å®¶æ·±å…¥ä»‹ç´¹ã€‚

## Formatting Context

åœ¨ä¸Šå€‹æ®µè½ä¸­ï¼Œæˆ‘å€‘æœ‰æåˆ° block formatting context, inline formatting contextï¼Œé‚£é€™äº›ç©¶ç«Ÿæ˜¯ä»€éº¼å‘¢ï¼Ÿ

CSS è¦ç¯„ä¸­ä¸¦æ²’æœ‰çµ¦ formatting context ä¸€å€‹å…·é«”çš„æè¿°ï¼Œæˆ‘æ˜¯å°‡ formatting context ç†è§£æˆ **group** çš„æ¦‚å¿µï¼Œå‡è¨­åœ¨ flow layout ä¸‹ï¼ŒæŸå€‹ block element å‰µé€ äº†ä¸€å€‹ block formatting contextï¼Œé‚£éº¼ç¾åœ¨æ•´ä»½ document è£¡å°±å­˜åœ¨äº†ä¸€å€‹ id ç‚º 123 (å‡è¨­) çš„ block formatting contextï¼Œä½ å¯ä»¥æŠŠä»»ä½• element åŠ åˆ°é€™å€‹ id ç‚º 123 çš„ block formatting contextï¼Œè€Œé€™äº› elements å°±è¢«è¦–ç‚ºå­˜åœ¨åœ¨åŒä¸€å€‹ context ä¹‹ä¸‹ã€‚

ç•¶ç„¶é€™äº› element ä¹Ÿå¯ä»¥è‡ªç«‹é–€æˆ¶ï¼Œåœ¨å…¶ä¸‹è‡ªå‰µæ–°çš„ block formatting contextï¼Œé‚£é€™å€‹ block formatting context çš„ id å°±æœƒèˆ‡å‰›é–‹å§‹é‚£å€‹ block element å‰µçš„ä¸åŒã€‚

å› æ­¤ï¼Œä¸€ä»½ document è£¡å¯ä»¥æœ‰å¤šç¨® formatting context ï¼Œè€Œæ¯ç¨® formatting context åˆå¯ä»¥æœ‰å¤šä»½ä¸åŒ id çš„ contextã€‚

ä¸åŒçš„ formatting context éµå¾ªè‘—ä¸åŒçš„æ’åˆ—æ–¹å¼ï¼Œåƒæ˜¯ block formatting context éµå¾ª block æ’åˆ—ã€inline formatting context éµå¾ª inline æ’åˆ—ã€‚è€Œ formatting context èˆ‡ formatting context å½¼æ­¤é–“ä¹Ÿå­˜åœ¨ä¸€äº›äº’å‹•è¦å‰‡ï¼Œåƒæ˜¯ä¸åŒçš„ block formatting context å½¼æ­¤é–“ä¸æœƒç™¼ç”Ÿ margin collapse:

```html
<div>
  <p>Line 1</p>
  <p>Line 2</p>
  <div class="newBFC">
    <p>Line 3</p>
  </div>
</div>

<style>
  p {
    margin: 20px 0;
  }
</style>

<!--å¦‚æœ .newBFC å‰µé€ äº†ä¸€å€‹æ–°çš„ block formmating contextï¼Œé‚£éº¼ Line 2 èˆ‡ Line 3 é–“å°±ä¸æœƒç™¼ç”Ÿ margin collapse-->
```

æ›´å¤šé—œæ–¼ block formatting context çš„ç”¢ç”Ÿæ™‚æ©Ÿã€è¡Œç‚ºèˆ‡æ‡‰ç”¨æˆ‘æœƒå¦å¯«ä¸€ç¯‡æ–‡ç« åšä»‹ç´¹ã€‚

ç›´è‡³ç›®å‰ç‚ºæ­¢ï¼Œæœ‰å‡ºç¾åœ¨ CSS è¦ç¯„è£¡ä¸¦è¢«ç‰¹åˆ¥å®šç¾©çš„ formatting context ç¨®é¡åªæœ‰ block formatting contextã€inline formatting contextã€flex formatting context èˆ‡ grid formatting contextã€‚

## display å±¬æ€§

æ—¢ç„¶ layout éƒ½è¦ç¯„åœ¨é‚£äº†ï¼Œé‚£æˆ‘å€‘å¦‚ä½•ä½¿ç”¨é€™äº›é…·ç‚«çš„ layout é€²è¡Œæ’ç‰ˆå‘¢ï¼Ÿ

é‚£ç•¶ç„¶æ˜¯ä½¿ç”¨ display å±¬æ€§äº†ã€‚

ç•¶ä½ å®šç¾© display å±¬æ€§æ™‚ï¼Œ**æœƒåŒæ™‚ç”¢ç”Ÿ outer display style èˆ‡ inner display style**ï¼Œouter display style ä½œç”¨åœ¨è¢«æ¨™ä¸Š display å±¬æ€§çš„é‚£å€‹ element ä¸Šï¼Œè€Œ inner display style å‰‡ä½œç”¨åœ¨ é‚£å€‹ element çš„ children ä¸Šã€‚

ä¸åŒçš„ display style æœƒå°æ‡‰ç”¢ç”Ÿä¸åŒçš„è¡Œç‚ºï¼Œåº•ä¸‹é€™å¼µ table èªªæ˜ç•¶ä½ ä½¿ç”¨ display å±¬æ€§æ™‚ï¼ŒèƒŒå¾Œåšäº†ä»€éº¼äº‹ï¼š

![Display table](https://res.cloudinary.com/dgppby8lr/image/upload/v1641712344/display-table_ykm5qt.png)

å¾ä¸Šé¢é€™å¼µ table å¯ä»¥çœ‹åˆ°ï¼Œç•¶ä½ å¯«å‡º `display: block` æ™‚ï¼Œä½ å…¶å¯¦æ˜¯å¯«å‡ºäº† `display: block flow`ï¼Œå‰é¢çš„ `block` æ˜¯ outer display styleï¼Œä»£è¡¨è©² element æœƒæ˜¯ä¸€å€‹ block elementï¼Œè€Œå¦‚æˆ‘å€‘å‰é¢æ‰€èªªï¼Œå¦‚æœä»–å‰›å¥½åˆåœ¨ flow layout ä¸‹ï¼Œé‚£éº¼è©² element å°±æœƒåƒèˆ‡åˆ°ä¸€å€‹ block formatting context ä¹‹ä¸­ï¼Œä¸¦ä¾ç…§ block çš„æ–¹å‘é€²è¡Œæ’åˆ—ã€‚å¾Œé¢çš„ `flow` æ˜¯ inner display styleï¼Œä»£è¡¨è©² element æœƒç”¨ flow layout å°åº•ä¸‹çš„ children é€²è¡Œæ’åˆ—ã€‚

æˆ‘å€‘çŸ¥é“æ¯å€‹ element éƒ½æœ‰ display å±¬æ€§ï¼Œå› æ­¤ä¸Šé¢é€™å€‹éç¨‹æœƒæŒçºŒçš„éè¿´ä¸‹å»ï¼Œæœ€å¾Œæ¯å€‹ element å°±æœƒæ­£ç¢ºçš„è¢«å®šä½ï¼Œä¹Ÿå°±æœƒå‘ˆç¾å‡ºä¸€ä»½æ¼‚äº®çš„ç¶²é ã€‚

ä¸‹é¢èˆ‰ä¸€å€‹ä¾‹å­ï¼Œå‡è¨­æˆ‘å€‘æœ‰ä¸‹é¢é€™æ¨£çš„ htmlï¼š

```html
<div>
  <div class="a" style="display: flex">
    <div class="b" style="display: block">123</div>
  </div>
</div>
```

é‚£éº¼åœ¨å…§éƒ¨ä»–æœƒè¢«çœ‹ä½œé€™æ¨£ï¼š

```
(flow layout)
.a æ˜¯ block level elementï¼Œå› ç‚ºåœ¨ flow layout ä¸‹ï¼Œæ‰€ä»¥åƒèˆ‡ block formatting contextã€‚ä¸¦åœ¨å…¶ä¸‹å‰µå»º flexible box layout
|
| (flexible box layout)
| .b æ˜¯ block level elementï¼Œä½†å› ç‚ºåœ¨ flexible box layout ä¸‹ï¼Œæ‰€ä»¥æ”¹ç‚ºåƒèˆ‡ flex formatting contextã€‚ä¸¦åœ¨å…¶ä¸‹å‰µå»º flow layout
```

## ç¸½çµ

é€™ç¯‡æ–‡ç« å¾ CSS è¦ç¯„çš„è§’åº¦ä¾†è§£é‡‹ç¶²é  element çš„æ’åˆ—åŸç†ï¼Œå¯ä»¥èªªæ˜¯æœ€æ ¹æœ¬çš„ CSS çŸ¥è­˜ã€‚

å¾é€™å€‹çŸ¥è­˜å‡ºç™¼ä½ å°±èƒ½æ¸…æ¥šåœ°çŸ¥é“è¢«å®šç¾© `display: flex` çš„ element å¯¦éš›ä¸Šè‡ªå·±ä¸æ˜¯ flexible box layoutï¼Œæ˜¯ä»–çš„ children æ‰æ˜¯ï¼›ä¸¦ä¸”åœ¨æœªä¾†æˆ‘ä¹Ÿæœƒå¾æ­¤è™•å‡ºç™¼ï¼Œå˜—è©¦è§£é‡‹æ›´å¤šçš„ CSS trick åŠç•°å¸¸ä¹‹è™• (è§£é‡‹ä¹‹å¾Œä½ æœƒç™¼ç¾é€™äº›ä¸€é»éƒ½ä¸ç•°å¸¸ï¼Œéƒ½æ˜¯ç…§è‘—è¦ç¯„èµ°è€Œå·² ğŸ˜…)ã€‚

å¸Œæœ›é€™ç¯‡æ–‡ç« ä½ æœƒå–œæ­¡ï¼Œæˆ‘å€‘ä¸‹æ¬¡è¦‹ï¼

**References**

- [CSS Flow Layout - CSS: Cascading Style Sheets | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flow_Layout)
- [Block and inline layout in normal flow](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flow_Layout/)
- [Layout mode - CSS: Cascading Style Sheets | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/Layout_mode)
- [Visual formatting model #normal-flow](https://www.w3.org/TR/CSS2/visuren.html#normal-flow)
- [Box Layout Modes: the display property](https://drafts.csswg.org/css-display/#the-display-properties)
- [Introduction to formatting contexts - CSS: Cascading Style Sheets | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flow_Layout/Intro_to_formatting_contexts)
